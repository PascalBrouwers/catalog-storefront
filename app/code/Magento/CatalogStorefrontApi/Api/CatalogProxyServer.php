<?php
# Generated by the Magento PHP proto generator.  DO NOT EDIT!

/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

declare(strict_types=1);

namespace Magento\CatalogStorefrontApi\Api;

class CatalogProxyServer implements \Magento\CatalogStorefrontApi\Proto\CatalogInterface
{
    private $service;

    public function __construct(
        CatalogServerInterface $service
    ) {
        $this->service = $service;
    }

    public function GetProducts(\Spiral\GRPC\ContextInterface $ctx, \Magento\CatalogStorefrontApi\Proto\ProductsGetRequest $in): \Magento\CatalogStorefrontApi\Proto\ProductsGetResult
    {
        try {
            $magentoDtoRequest = $this->GetProductsFromProto($in);
            $magentoDtoResponse = $this->service->GetProducts($magentoDtoRequest);
            return $this->GetProductsToProto($magentoDtoResponse);
        } catch (\Exception $e) {
            throw new \Spiral\GRPC\Exception\InvokeException(
                $e->getMessage(),
                \Spiral\GRPC\StatusCode::UNKNOWN,
                [],
                $e
            );
        }
    }

    private function GetProductsFromProto(\Magento\CatalogStorefrontApi\Proto\ProductsGetRequest $value): \Magento\CatalogStorefrontApi\Api\Data\ProductsGetRequestInterface
    {
        // convert data from \Magento\CatalogStorefrontApi\Proto\ProductsGetRequest
        // to \Magento\CatalogStorefrontApi\Api\Data\ProductsGetRequest
        /** @var \Magento\CatalogStorefrontApi\Proto\ProductsGetRequest $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Api\Data\ProductsGetRequest();
            $r->setIds($value->getIds());
            $r->setStore($value->getStore());
            $r->setAttributeCodes($value->getAttributeCodes());
            return $r;
        };
        $out = $p();

        return $out;
    }

    private function GetProductsToProto(\Magento\CatalogStorefrontApi\Api\Data\ProductsGetResultInterface $value): \Magento\CatalogStorefrontApi\Proto\ProductsGetResult
    {
        // convert data from \Magento\CatalogStorefrontApi\Api\Data\ProductsGetResult
        // to \Magento\CatalogStorefrontApi\Proto\ProductsGetResult
        /** @var \Magento\CatalogStorefrontApi\Api\Data\ProductsGetResult $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Proto\ProductsGetResult();
            $res = [];
            foreach ($value->getData() as $item) {
                // convert data from \Magento\CatalogStorefrontApi\Api\Data\Product
                // to \Magento\CatalogStorefrontApi\Proto\Product
                /** @var \Magento\CatalogStorefrontApi\Api\Data\Product $item **/
                $p = function () use ($item) {
                    $r = new \Magento\CatalogStorefrontApi\Proto\Product();
                    $r->setEntityId($item->getEntityId());
                    $r->setAttributeSetId($item->getAttributeSetId());
                    $r->setHasOptions($item->getHasOptions());
                    $r->setId($item->getId());
                    $r->setSku($item->getSku());
                    $r->setTypeId($item->getTypeId());
                    $r->setStatus($item->getStatus());
                    $r->setStockStatus($item->getStockStatus());
                    $r->setName($item->getName());
                    $r->setDescription($item->getDescription());
                    $r->setShortDescription($item->getShortDescription());
                    $r->setUrlKey($item->getUrlKey());
                    $r->setMetaDescription($item->getMetaDescription());
                    $r->setMetaKeyword($item->getMetaKeyword());
                    $r->setMetaTitle($item->getMetaTitle());
                    $r->setTaxClassId($item->getTaxClassId());
                    $r->setWeight($item->getWeight());
                    $prop19 = $item->getImage();
                    if ($prop19 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Api\Data\Image
                        // to \Magento\CatalogStorefrontApi\Proto\Image
                        /** @var \Magento\CatalogStorefrontApi\Api\Data\Image $prop19 **/
                        $p = function () use ($prop19) {
                            $r = new \Magento\CatalogStorefrontApi\Proto\Image();
                            $r->setUrl($prop19->getUrl());
                            $r->setLabel($prop19->getLabel());
                            return $r;
                        };
                        $proto = $p();
                        $r->setImage($proto);
                    }

                    $prop20 = $item->getSmallImage();
                    if ($prop20 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Api\Data\Image
                        // to \Magento\CatalogStorefrontApi\Proto\Image
                        /** @var \Magento\CatalogStorefrontApi\Api\Data\Image $prop20 **/
                        $p = function () use ($prop20) {
                            $r = new \Magento\CatalogStorefrontApi\Proto\Image();
                            $r->setUrl($prop20->getUrl());
                            $r->setLabel($prop20->getLabel());
                            return $r;
                        };
                        $proto = $p();
                        $r->setSmallImage($proto);
                    }

                    $prop21 = $item->getThumbnail();
                    if ($prop21 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Api\Data\Image
                        // to \Magento\CatalogStorefrontApi\Proto\Image
                        /** @var \Magento\CatalogStorefrontApi\Api\Data\Image $prop21 **/
                        $p = function () use ($prop21) {
                            $r = new \Magento\CatalogStorefrontApi\Proto\Image();
                            $r->setUrl($prop21->getUrl());
                            $r->setLabel($prop21->getLabel());
                            return $r;
                        };
                        $proto = $p();
                        $r->setThumbnail($proto);
                    }

                    $r->setVisibility($item->getVisibility());
                    return $r;
                };
                $proto = $p();
                $res[] = $proto;
            }
            $r->setData($res);

            return $r;
        };
        $proto = $p();

        return $proto;
    }


    public function ImportProducts(\Spiral\GRPC\ContextInterface $ctx, \Magento\CatalogStorefrontApi\Proto\ImportProductsRequest $in): \Magento\CatalogStorefrontApi\Proto\ImportProductsResponse
    {
        try {
            $magentoDtoRequest = $this->ImportProductsFromProto($in);
            $magentoDtoResponse = $this->service->ImportProducts($magentoDtoRequest);
            return $this->ImportProductsToProto($magentoDtoResponse);
        } catch (\Exception $e) {
            throw new \Spiral\GRPC\Exception\InvokeException(
                $e->getMessage(),
                \Spiral\GRPC\StatusCode::UNKNOWN,
                [],
                $e
            );
        }
    }

    private function ImportProductsFromProto(\Magento\CatalogStorefrontApi\Proto\ImportProductsRequest $value): \Magento\CatalogStorefrontApi\Api\Data\ImportProductsRequestInterface
    {
        // convert data from \Magento\CatalogStorefrontApi\Proto\ImportProductsRequest
        // to \Magento\CatalogStorefrontApi\Api\Data\ImportProductsRequest
        /** @var \Magento\CatalogStorefrontApi\Proto\ImportProductsRequest $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Api\Data\ImportProductsRequest();
            $res = [];
            foreach ($value->getProducts() as $item) {
                // convert data from \Magento\CatalogStorefrontApi\Proto\Product
                // to \Magento\CatalogStorefrontApi\Api\Data\Product
                /** @var \Magento\CatalogStorefrontApi\Proto\Product $item **/
                $p = function () use ($item) {
                    $r = new \Magento\CatalogStorefrontApi\Api\Data\Product();
                    $r->setEntityId($item->getEntityId());
                    $r->setAttributeSetId($item->getAttributeSetId());
                    $r->setHasOptions($item->getHasOptions());
                    $r->setId($item->getId());
                    $r->setSku($item->getSku());
                    $r->setTypeId($item->getTypeId());
                    $r->setStatus($item->getStatus());
                    $r->setStockStatus($item->getStockStatus());
                    $r->setName($item->getName());
                    $r->setDescription($item->getDescription());
                    $r->setShortDescription($item->getShortDescription());
                    $r->setUrlKey($item->getUrlKey());
                    $r->setMetaDescription($item->getMetaDescription());
                    $r->setMetaKeyword($item->getMetaKeyword());
                    $r->setMetaTitle($item->getMetaTitle());
                    $r->setTaxClassId($item->getTaxClassId());
                    $r->setWeight($item->getWeight());
                    $prop19 = $item->getImage();
                    if ($prop19 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Proto\Image
                        // to \Magento\CatalogStorefrontApi\Api\Data\Image
                        /** @var \Magento\CatalogStorefrontApi\Proto\Image $prop19 **/
                        $p = function () use ($prop19) {
                            $r = new \Magento\CatalogStorefrontApi\Api\Data\Image();
                            $r->setUrl($prop19->getUrl());
                            $r->setLabel($prop19->getLabel());
                            return $r;
                        };
                        $out = $p();
                        $r->setImage($out);
                    }

                    $prop20 = $item->getSmallImage();
                    if ($prop20 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Proto\Image
                        // to \Magento\CatalogStorefrontApi\Api\Data\Image
                        /** @var \Magento\CatalogStorefrontApi\Proto\Image $prop20 **/
                        $p = function () use ($prop20) {
                            $r = new \Magento\CatalogStorefrontApi\Api\Data\Image();
                            $r->setUrl($prop20->getUrl());
                            $r->setLabel($prop20->getLabel());
                            return $r;
                        };
                        $out = $p();
                        $r->setSmallImage($out);
                    }

                    $prop21 = $item->getThumbnail();
                    if ($prop21 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Proto\Image
                        // to \Magento\CatalogStorefrontApi\Api\Data\Image
                        /** @var \Magento\CatalogStorefrontApi\Proto\Image $prop21 **/
                        $p = function () use ($prop21) {
                            $r = new \Magento\CatalogStorefrontApi\Api\Data\Image();
                            $r->setUrl($prop21->getUrl());
                            $r->setLabel($prop21->getLabel());
                            return $r;
                        };
                        $out = $p();
                        $r->setThumbnail($out);
                    }

                    $r->setVisibility($item->getVisibility());
                    return $r;
                };
                $out = $p();
                $res[] = $out;
            }
            $r->setProducts($res);

            $r->setStore($value->getStore());
            $prop3 = $value->getParams();
            if ($prop3 !== null) {
                // convert data from \Magento\CatalogStorefrontApi\Proto\KeyValue
                // to \Magento\CatalogStorefrontApi\Api\Data\KeyValue
                /** @var \Magento\CatalogStorefrontApi\Proto\KeyValue $prop3 **/
                $p = function () use ($prop3) {
                    $r = new \Magento\CatalogStorefrontApi\Api\Data\KeyValue();
                    $r->setKey($prop3->getKey());
                    $r->setValue($prop3->getValue());
                    return $r;
                };
                $out = $p();
                $r->setParams($out);
            }

            return $r;
        };
        $out = $p();

        return $out;
    }

    private function ImportProductsToProto(\Magento\CatalogStorefrontApi\Api\Data\ImportProductsResponseInterface $value): \Magento\CatalogStorefrontApi\Proto\ImportProductsResponse
    {
        // convert data from \Magento\CatalogStorefrontApi\Api\Data\ImportProductsResponse
        // to \Magento\CatalogStorefrontApi\Proto\ImportProductsResponse
        /** @var \Magento\CatalogStorefrontApi\Api\Data\ImportProductsResponse $value **/
        $p = function () use ($value) {
            $r = new \Magento\CatalogStorefrontApi\Proto\ImportProductsResponse();
            $res = [];
            foreach ($value->getData() as $item) {
                // convert data from \Magento\CatalogStorefrontApi\Api\Data\Product
                // to \Magento\CatalogStorefrontApi\Proto\Product
                /** @var \Magento\CatalogStorefrontApi\Api\Data\Product $item **/
                $p = function () use ($item) {
                    $r = new \Magento\CatalogStorefrontApi\Proto\Product();
                    $r->setEntityId($item->getEntityId());
                    $r->setAttributeSetId($item->getAttributeSetId());
                    $r->setHasOptions($item->getHasOptions());
                    $r->setId($item->getId());
                    $r->setSku($item->getSku());
                    $r->setTypeId($item->getTypeId());
                    $r->setStatus($item->getStatus());
                    $r->setStockStatus($item->getStockStatus());
                    $r->setName($item->getName());
                    $r->setDescription($item->getDescription());
                    $r->setShortDescription($item->getShortDescription());
                    $r->setUrlKey($item->getUrlKey());
                    $r->setMetaDescription($item->getMetaDescription());
                    $r->setMetaKeyword($item->getMetaKeyword());
                    $r->setMetaTitle($item->getMetaTitle());
                    $r->setTaxClassId($item->getTaxClassId());
                    $r->setWeight($item->getWeight());
                    $prop19 = $item->getImage();
                    if ($prop19 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Api\Data\Image
                        // to \Magento\CatalogStorefrontApi\Proto\Image
                        /** @var \Magento\CatalogStorefrontApi\Api\Data\Image $prop19 **/
                        $p = function () use ($prop19) {
                            $r = new \Magento\CatalogStorefrontApi\Proto\Image();
                            $r->setUrl($prop19->getUrl());
                            $r->setLabel($prop19->getLabel());
                            return $r;
                        };
                        $proto = $p();
                        $r->setImage($proto);
                    }

                    $prop20 = $item->getSmallImage();
                    if ($prop20 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Api\Data\Image
                        // to \Magento\CatalogStorefrontApi\Proto\Image
                        /** @var \Magento\CatalogStorefrontApi\Api\Data\Image $prop20 **/
                        $p = function () use ($prop20) {
                            $r = new \Magento\CatalogStorefrontApi\Proto\Image();
                            $r->setUrl($prop20->getUrl());
                            $r->setLabel($prop20->getLabel());
                            return $r;
                        };
                        $proto = $p();
                        $r->setSmallImage($proto);
                    }

                    $prop21 = $item->getThumbnail();
                    if ($prop21 !== null) {
                        // convert data from \Magento\CatalogStorefrontApi\Api\Data\Image
                        // to \Magento\CatalogStorefrontApi\Proto\Image
                        /** @var \Magento\CatalogStorefrontApi\Api\Data\Image $prop21 **/
                        $p = function () use ($prop21) {
                            $r = new \Magento\CatalogStorefrontApi\Proto\Image();
                            $r->setUrl($prop21->getUrl());
                            $r->setLabel($prop21->getLabel());
                            return $r;
                        };
                        $proto = $p();
                        $r->setThumbnail($proto);
                    }

                    $r->setVisibility($item->getVisibility());
                    return $r;
                };
                $proto = $p();
                $res[] = $proto;
            }
            $r->setData($res);

            return $r;
        };
        $proto = $p();

        return $proto;
    }
}
